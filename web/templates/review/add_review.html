{% extends "base.html" %}
{% load i18n %}

{% block content %}
<div class="container mt-5">
    <h2 class="text-center mb-4">{% trans "Add a Review for Your Order" %}</h2>
    
    <div class="card p-4 shadow-sm">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            
            <div class="mb-3">
                <label class="form-label">{% trans "Product:" %}</label>
                    {% for item in products %}
                        <option value="{{ item.product.product_id }}">{{ item.product.product_name }}</option>
                    {% endfor %}
            </div>
            
            <div class="mb-3">
                <label class="form-label">{% trans "Rating (1-5):" %}</label>
                <input type="number" step="0.1" name="rating" min="1" max="5" class="form-control" value="{{ form.rating.value|default:1 }}">
            </div>
            
            
            <div class="mb-3">
                <label class="form-label">{% trans "Comment:" %}</label>
                {{ form.comment }}
            </div>

            <div class="mb-3">
                <label class="form-label">{% trans "Upload Image:" %}</label>
                {{ form.image }}
            </div>

            <div class="mb-3">
                <label class="form-label">{% trans "Upload Video:" %}</label>
                {{ form.video }}
            </div>

            <button type="submit" class="btn btn-primary w-100">{% trans "Submit Review" %}</button>
        </form>
    </div>
</div>

<style>
    .container {
        max-width: 600px;
    }
    .card {
        border-radius: 10px;
        padding: 20px;
    }
    .star-rating {
        direction: rtl;
        font-size: 2rem;
        color: #ddd;
        cursor: pointer;
    }

    .star {
        display: inline-block;
        transition: color 0.3s;
    }

    .star:hover,
    .star.selected {
        color: gold;
    }
</style>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const stars = document.querySelectorAll(".star");
        const ratingInput = document.getElementById("rating");

        stars.forEach(star => {
            star.addEventListener("mouseover", function () {
                let value = this.getAttribute("data-value");
                stars.forEach(s => s.style.color = (s.getAttribute("data-value") <= value) ? "gold" : "#ddd");
            });

            star.addEventListener("click", function () {
                let value = this.getAttribute("data-value");
                ratingInput.value = value;
                stars.forEach(s => s.classList.remove("selected"));
                this.classList.add("selected");
            });
        });
    });
</script>

{% endblock %}